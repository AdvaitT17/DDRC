<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reset Password | DDRC</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/header.css" />
    <link rel="stylesheet" href="/css/footer.css" />
    <link rel="stylesheet" href="/login/css/style.css" />
    <link rel="stylesheet" href="/css/accessibility.css" />
    <style>
        .password-requirements {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .password-requirements h6 {
            margin-bottom: 10px;
            color: #495057;
        }

        .password-requirements ul {
            margin: 0;
            padding-left: 20px;
        }

        .password-requirements li {
            margin-bottom: 5px;
            color: #6c757d;
        }

        .password-requirements li.valid {
            color: #28a745;
        }

        .password-requirements li.valid::marker {
            content: "âœ“ ";
        }
    </style>
</head>

<body>
    <!-- Accessibility Announcement for Screen Readers -->
    <div id="screenReaderAnnouncer" class="sr-only" role="alert" aria-live="polite"></div>

    <!-- Main content -->
    <div id="mainContent">
        <!-- Site Header Component -->
        <div id="site-header"></div>

        <!-- Main Content -->
        <main class="auth-container" id="main-content" role="main" tabindex="-1">
            <div class="auth-box">
                <div class="auth-header">
                    <h2>Reset Password</h2>
                    <p>Enter your new password below</p>
                </div>

                <!-- Loading State (shown by default) -->
                <div id="loadingState" class="auth-form text-center">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Verifying reset link...</span>
                    </div>
                    <p class="mt-3 text-muted">Verifying your reset link...</p>
                </div>

                <!-- Invalid Token Message (hidden by default) -->
                <div id="invalidTokenMessage" class="auth-form" style="display: none;">
                    <div class="alert alert-danger" style="display: block;">
                        This password reset link is invalid or has expired.
                    </div>

                    <p class="text-center text-muted mb-4">Please request a new password reset link to continue.</p>

                    <a href="/forgot-password" class="btn btn-primary w-100">Request New Reset Link</a>

                    <div class="auth-footer">
                        <p style="display:inline;">Remember your password? </p>
                        <p style="display:inline;"><a href="/login">Login here</a></p>
                    </div>
                </div>

                <form id="resetPasswordForm" class="auth-form" novalidate aria-label="Reset password form"
                    style="display: none;">
                    <div class="alert alert-danger" style="display: none" id="resetError" role="alert"></div>
                    <div class="alert alert-success" style="display: none" id="resetSuccess" role="alert"></div>

                    <div class="password-requirements">
                        <h6>Password Requirements:</h6>
                        <ul>
                            <li id="req-length">At least 8 characters</li>
                            <li id="req-uppercase">One uppercase letter</li>
                            <li id="req-lowercase">One lowercase letter</li>
                            <li id="req-number">One number</li>
                            <li id="req-special">One special character (!@#$%^&*(),.?":{}|<>)</li>
                        </ul>
                    </div>

                    <div class="form-group">
                        <label for="password">New Password</label>
                        <div class="password-input">
                            <input type="password" class="form-control" id="password" name="password" required
                                aria-required="true" />
                            <button type="button" class="toggle-password" aria-label="Toggle password visibility">
                                <img src="/images/eye.svg" alt="Show password icon" class="eye-icon" />
                            </button>
                        </div>
                        <div class="invalid-feedback">Please enter a valid password</div>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword">Confirm New Password</label>
                        <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required
                            aria-required="true" />
                        <div class="invalid-feedback">Passwords do not match</div>
                    </div>

                    <button type="submit" class="btn btn-primary w-100" id="submitBtn">
                        Reset Password
                    </button>

                    <div class="auth-footer">
                        <p>
                            <a href="/login">Back to Login</a>
                        </p>
                    </div>
                </form>
            </div>
        </main>

        <!-- Footer -->
        <footer role="contentinfo" aria-label="Site Footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>About</h3>
                    <ul>
                        <li>
                            <a href="/about-ddrc" aria-label="Know more about DDRC">Know more about DDRC</a>
                        </li>
                        <li>
                            <a href="/schemes" aria-label="Schemes for Persons with Disabilities">Schemes for Persons
                                with
                                Disabilities</a>
                        </li>
                        <li>
                            <a href="/about-department" aria-label="About Department">About Department</a>
                        </li>
                        <li>
                            <a href="/medical-camps" aria-label="Medical Camps and Hospitals">Medical Camps /
                                Hospitals</a>
                        </li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Quick Access Key</h3>
                    <ul>
                        <li>H = Go to Home Page</li>
                        <li>S = Skip to main content</li>
                        <li>F = Site Search</li>
                        <li>T = Back to Top</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Use keyboard for quick access</h3>
                    <ul>
                        <li>Internet Explorer - [Alt] + accesskey</li>
                        <li>Chrome - [Alt] + accesskey</li>
                        <li>Firefox - [Alt] [Shift] + accesskey</li>
                        <li>Safari - [Alt] + accesskey</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>
                    &copy; Copyright
                    <script>
                        document.write(new Date().getFullYear());
                    </script>
                    District Disability Rehabilitation Centre, Mumbai. All Rights
                    Reserved.
                </p>
                <div class="footer-links">
                    <a href="/terms" aria-label="Terms and Conditions">Terms & Conditions</a>
                    <a href="/privacy" aria-label="Privacy Policy">Privacy Policy</a>
                    <a href="/copyright" aria-label="Copyright Policy">Copyright Policy</a>
                    <a href="/accessibility" aria-label="Accessibility Statement">Accessibility Statement</a>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/components/header.js"></script>
    <script src="/js/accessibility.js"></script>
    <script src="/reset-password/js/reset-password.js"></script>
</body>

</html>